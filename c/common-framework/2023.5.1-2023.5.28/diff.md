# Comparing `tmp/common_framework-2023.5.1-py3-none-any.whl.zip` & `tmp/common_framework-2023.5.28-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,9 +1,9 @@
-Zip file size: 161436 bytes, number of entries: 71
--rw-r--r--  2.0 unx      103 b- defN 23-May-09 13:46 common/__init__.py
+Zip file size: 161506 bytes, number of entries: 71
+-rw-r--r--  2.0 unx      104 b- defN 23-May-28 15:59 common/__init__.py
 -rw-r--r--  2.0 unx    25165 b- defN 23-Mar-21 14:36 common/admin.py
 -rw-r--r--  2.0 unx      625 b- defN 21-Jun-29 15:20 common/apps.py
 -rw-r--r--  2.0 unx     4053 b- defN 21-Jun-29 15:24 common/auth.py
 -rw-r--r--  2.0 unx     4559 b- defN 21-Jun-29 15:24 common/commands.py
 -rw-r--r--  2.0 unx    23004 b- defN 23-Mar-21 14:36 common/excel.py
 -rw-r--r--  2.0 unx    27464 b- defN 23-Mar-21 14:36 common/fields.py
 -rw-r--r--  2.0 unx    13777 b- defN 23-Mar-21 14:36 common/forms.py
@@ -26,16 +26,16 @@
 -rw-r--r--  2.0 unx     5887 b- defN 23-Mar-21 14:36 common/api/fields.py
 -rw-r--r--  2.0 unx     1521 b- defN 21-Jun-29 15:20 common/api/input_serializers.py
 -rw-r--r--  2.0 unx     1928 b- defN 21-Jun-29 15:20 common/api/pagination.py
 -rw-r--r--  2.0 unx     1778 b- defN 21-Jun-29 15:20 common/api/permissions.py
 -rw-r--r--  2.0 unx     1237 b- defN 22-Jan-31 10:51 common/api/renderers.py
 -rw-r--r--  2.0 unx    12660 b- defN 23-Mar-21 14:36 common/api/serializers.py
 -rw-r--r--  2.0 unx      768 b- defN 21-Jun-29 15:20 common/api/urls.py
--rw-r--r--  2.0 unx    63718 b- defN 23-May-23 08:44 common/api/utils.py
--rw-r--r--  2.0 unx    25786 b- defN 23-Mar-21 14:36 common/api/viewsets.py
+-rw-r--r--  2.0 unx    63847 b- defN 23-May-28 15:57 common/api/utils.py
+-rw-r--r--  2.0 unx    25795 b- defN 23-May-28 15:57 common/api/viewsets.py
 -rw-rw-r--  2.0 unx    13644 b- defN 21-Jun-29 19:54 common/locale/en/LC_MESSAGES/django.mo
 -rw-rw-r--  2.0 unx    13366 b- defN 21-Jun-29 19:52 common/locale/en/LC_MESSAGES/django.po
 -rw-rw-r--  2.0 unx    14751 b- defN 21-Jun-29 15:03 common/locale/fr/LC_MESSAGES/django.mo
 -rw-rw-r--  2.0 unx    14473 b- defN 21-Jun-29 15:02 common/locale/fr/LC_MESSAGES/django.po
 -rw-r--r--  2.0 unx      713 b- defN 21-Jun-29 15:20 common/management/__init__.py
 -rw-r--r--  2.0 unx       29 b- defN 18-Feb-03 17:24 common/management/commands/__init__.py
 -rw-r--r--  2.0 unx     1091 b- defN 21-Jun-29 15:24 common/management/commands/abort_sql.py
@@ -61,13 +61,13 @@
 -rw-rw-r--  2.0 unx     6391 b- defN 22-Jan-31 14:00 common/templates/common/scripts.js
 -rw-r--r--  2.0 unx       29 b- defN 18-Feb-03 17:24 common/templatetags/__init__.py
 -rw-r--r--  2.0 unx    15293 b- defN 23-Mar-21 14:36 common/templatetags/tools.py
 -rw-r--r--  2.0 unx    25744 b- defN 23-Feb-13 20:27 common/tests/__init__.py
 -rw-r--r--  2.0 unx      311 b- defN 22-Jan-31 16:13 common/tests/test_api.py
 -rw-r--r--  2.0 unx     8252 b- defN 21-Jun-29 15:20 common/tests/test_utils.py
 -rw-r--r--  2.0 unx      494 b- defN 21-Jun-29 15:24 common/tests/urls.py
--rw-rw-r--  2.0 unx     1023 b- defN 23-May-23 08:57 common_framework-2023.5.1.dist-info/LICENSE.txt
--rw-r--r--  2.0 unx    23092 b- defN 23-May-23 08:57 common_framework-2023.5.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-23 08:57 common_framework-2023.5.1.dist-info/WHEEL
--rw-r--r--  2.0 unx      114 b- defN 23-May-23 08:57 common_framework-2023.5.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     5992 b- defN 23-May-23 08:57 common_framework-2023.5.1.dist-info/RECORD
-71 files, 599208 bytes uncompressed, 151998 bytes compressed:  74.6%
+-rw-rw-r--  2.0 unx     1023 b- defN 23-May-28 16:03 common_framework-2023.5.28.dist-info/LICENSE.txt
+-rw-r--r--  2.0 unx    23093 b- defN 23-May-28 16:03 common_framework-2023.5.28.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-28 16:03 common_framework-2023.5.28.dist-info/WHEEL
+-rw-r--r--  2.0 unx      114 b- defN 23-May-28 16:03 common_framework-2023.5.28.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     5997 b- defN 23-May-28 16:03 common_framework-2023.5.28.dist-info/RECORD
+71 files, 599353 bytes uncompressed, 152058 bytes compressed:  74.6%
```

## zipnote {}

```diff
@@ -192,23 +192,23 @@
 
 Filename: common/tests/test_utils.py
 Comment: 
 
 Filename: common/tests/urls.py
 Comment: 
 
-Filename: common_framework-2023.5.1.dist-info/LICENSE.txt
+Filename: common_framework-2023.5.28.dist-info/LICENSE.txt
 Comment: 
 
-Filename: common_framework-2023.5.1.dist-info/METADATA
+Filename: common_framework-2023.5.28.dist-info/METADATA
 Comment: 
 
-Filename: common_framework-2023.5.1.dist-info/WHEEL
+Filename: common_framework-2023.5.28.dist-info/WHEEL
 Comment: 
 
-Filename: common_framework-2023.5.1.dist-info/top_level.txt
+Filename: common_framework-2023.5.28.dist-info/top_level.txt
 Comment: 
 
-Filename: common_framework-2023.5.1.dist-info/RECORD
+Filename: common_framework-2023.5.28.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## common/__init__.py

```diff
@@ -1,5 +1,5 @@
 # coding: utf-8
 __all__ = []
-__version__ = "2023.5.1"
+__version__ = "2023.5.28"
 
 default_app_config = "common.apps.CommonConfig"
```

## common/api/utils.py

```diff
@@ -221,42 +221,43 @@
     arg_name, arg_value, *_ = arg_raw.split(":", maxsplit=1) + [""]
     if not arg_value or arg_name not in converts:
         arg_name, arg_value = None, arg_raw
     try:
         arg_value = ast.literal_eval(arg_value)
     except (SyntaxError, ValueError):
         pass
-    if value := parse_arg_value(arg_value):
+    if value := parse_arg_value(arg_value, key=function):
         arg_value = value
     else:
         arg_value = converts.get(arg_name or arg_index, Value)(arg_value)
     if arg_name:
         return {arg_name: arg_value}
     return arg_value
 
 
-def parse_arg_value(value, keep=False):
+def parse_arg_value(value, keep=False, key=None):
     """
     Parse une valeur contenant une référence de champ ou une fonction de recherche
     :param value: Valeur d'argument
     :param keep: Garde la valeur d'entrée par défaut
+    :param key: Nom du champ ou de la fonction appelante
     :return: Valeur ou champ de base de données
     """
     if isinstance(value, str):
         if value.startswith("[") and value.endswith("]"):
             value = value[1:-1].replace(".", "__")
             value, cast, *_ = value.split(":") + [""]
             value = F(value)
             if output_field := CASTS.get(cast.lower()):
                 value = functions.Cast(value, output_field=output_field)
             return value
-        if is_postgresql and (search := SEARCH_FORMAT.match(value)):
+        if is_postgresql and key != "filters" and (search := SEARCH_FORMAT.match(value)):
             params = search.groupdict()
             query = params.get("query")
-            config = parse_arg_value(params.get("config")) or params.get("config")
+            config = parse_arg_value(params.get("config"), key=key) or params.get("config")
             search_type = params.pop("search_type").lower()
             search_type = {
                 "q": "plain",
                 "p": "phrase",
                 "r": "raw",
                 "w": "websearch",
                 "v": "vector",
@@ -333,15 +334,15 @@
     for filter in filters:
         if isinstance(filter, tuple):
             elements.append(parse_filters(filter))
         elif isinstance(filter, dict):
             fields = {}
             for key, value in filter.items():
                 key = key.replace(".", "__")
-                value = parse_arg_value(value) or value
+                value = parse_arg_value(value, key=key) or value
                 fields[key] = url_value(key, value)
             elements.append(Q(**fields))
         elif isinstance(filter, str):
             operator = filter.lower()
     if operator == "or":
         q = elements.pop(0)
         for element in elements:
@@ -1007,15 +1008,15 @@
 
         # Filtres (dans une fonction pour être appelé par les aggregations sans group_by)
         def do_filter(queryset):
             try:
                 filters, excludes = {}, {}
                 for key, value in url_params.items():
                     key = key.replace(".", "__")
-                    value = parse_arg_value(value) or value
+                    value = parse_arg_value(value, key=key) or value
                     if key in reserved_query_params:
                         continue
                     if key.startswith("-"):
                         key = key[1:].strip()
                         excludes[key] = url_value(key, value)
                     else:
                         key = (key[1:] if key.startswith(" ") or key.startswith("+") else key).strip()
```

## common/api/viewsets.py

```diff
@@ -216,15 +216,15 @@
 
             # Filtres (dans une fonction pour être appelé par les aggregations sans group_by)
             def do_filter(queryset):
                 try:
                     filters, excludes = {}, {}
                     for key, value in url_params.items():
                         key = key.replace(".", "__")
-                        value = parse_arg_value(value) or value
+                        value = parse_arg_value(value, key=key) or value
                         if key in reserved_query_params:
                             continue
                         if key.startswith("-"):
                             key = key[1:].strip()
                             excludes[key] = url_value(key, value)
                         else:
                             key = (key[1:] if key.startswith(" ") or key.startswith("+") else key).strip()
```

## Comparing `common_framework-2023.5.1.dist-info/LICENSE.txt` & `common_framework-2023.5.28.dist-info/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `common_framework-2023.5.1.dist-info/METADATA` & `common_framework-2023.5.28.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: common-framework
-Version: 2023.5.1
+Version: 2023.5.28
 Summary: All-in-one framework for Django and Django REST Framework
 Home-page: https://github.com/debnet/common-framework
 Author: Marc Debureaux
 Author-email: marc@debureaux.fr
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Environment :: Web Environment
 Classifier: Framework :: Django
```

## Comparing `common_framework-2023.5.1.dist-info/RECORD` & `common_framework-2023.5.28.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-common/__init__.py,sha256=q3RvaHuypl12GHzBPFxyiM-LPdJjGT30Bk6josPnguo,103
+common/__init__.py,sha256=598FuoLgmRyRKsE26tX2Apclsh_Ggg13FdlH69MS_Ok,104
 common/admin.py,sha256=0zwE6Qq_sD60Nds4EWn0Rkg2726nOjv6w_K3KgJq9_s,25165
 common/apps.py,sha256=Rm00kplkzdk1mR1EhLa4nGb0D_ImQWYlEcbLvduQE1k,625
 common/auth.py,sha256=1itJcvKdlMQ97-vYawpyKJiWJtiv2DLXDIIzh1kDz6E,4053
 common/commands.py,sha256=_TnINchAhIHkmlPG-CJtdHxZmECpPSkuVNXGyxKNuXs,4559
 common/excel.py,sha256=046lBpnh6lqXRDb0tMc4bAQCUGtscw_B0Dxjbt0EmC0,23004
 common/fields.py,sha256=ZaSsxz2WqXB03Zm1isw8y0sL3st8ARGRwYbi7LyUn-4,27464
 common/forms.py,sha256=RtF595roeFklnSVz-hnyiCrwcxoRFTOazVMBhfH8RlY,13777
@@ -25,16 +25,16 @@
 common/api/fields.py,sha256=kJBbeG47c0AWTljTSG9ssBfFlUBd8N5eWxm1ZKBXnss,5887
 common/api/input_serializers.py,sha256=IKPAi_xn4A8crr9GzVQpXHQYcie9vbPLmTkwIf0JW2Y,1521
 common/api/pagination.py,sha256=aob4_JN65LVsfumfxIZiME2xLzxDTH3URCD79U4uBNY,1928
 common/api/permissions.py,sha256=R7D1CJAdZmefsUGv3kJB49R04vMld8rnxG1w-wJBoO8,1778
 common/api/renderers.py,sha256=Drr9No47Ic7jNVND6PoG0cIhZdLYXgvguaWZLCJZNgE,1237
 common/api/serializers.py,sha256=me5ReTvEZBs6b4zK8ewqjEpgh5hoL8Xg2LfsP5yAqSs,12660
 common/api/urls.py,sha256=Voc8Xs2Hf_HjXUCiUJGnVfQnymm2k04sGV8DGcSoAeU,768
-common/api/utils.py,sha256=4JrAaJFaVYLmqkSx0AhgfVjtt3yCRWU0zZFx7szpp38,63718
-common/api/viewsets.py,sha256=ByNArRI5B6Dl2osHuIMgQ8A2Kd56avH-5Xa8HLHnY_0,25786
+common/api/utils.py,sha256=QrWT3Qb3HiuL1Rzk_8I8KIBafb_fYYglJhnbtzDj9ls,63847
+common/api/viewsets.py,sha256=w3IGgP2UiEcgaXqIN6ea0qEud8FJGIenclm-gs7mEns,25795
 common/locale/en/LC_MESSAGES/django.mo,sha256=9Gwg_39ACVoUc-mnRkPMH6bOfO8NnWWmbPzGp9tpZx8,13644
 common/locale/en/LC_MESSAGES/django.po,sha256=L1sjFHk5NSQ0y_O3-ExpG40kED1GRstu_shUPtxHJUE,13366
 common/locale/fr/LC_MESSAGES/django.mo,sha256=2XqJy6Zbj4BskU65NaVHRmynzD-7zJSNoxtNvzzmJwg,14751
 common/locale/fr/LC_MESSAGES/django.po,sha256=0WD179BMH9QpBIOLPaJPhCiCCRK4sL3nXsTb8oAMHbo,14473
 common/management/__init__.py,sha256=qzEiZSOALgbxPd39Uwug4FOJvKkba1PDyWXIlVmdmws,713
 common/management/commands/__init__.py,sha256=3CpLhn4rzlaCDOr5INBfiYiXV-n61qnFFFhEK7PB7Qo,29
 common/management/commands/abort_sql.py,sha256=XbQ4obdcwsJxk19rLVLicBa7hKaHToQe99FpSPEW3xw,1091
@@ -60,12 +60,12 @@
 common/templates/common/scripts.js,sha256=Ln4Je2BCvNmozwj8TDuT2EpXXnMV1g49-QqgosJRAcM,6391
 common/templatetags/__init__.py,sha256=3CpLhn4rzlaCDOr5INBfiYiXV-n61qnFFFhEK7PB7Qo,29
 common/templatetags/tools.py,sha256=2lMF0PT5jM4SrybT8QUhvBGF9YOd495scs6sFwDJ76w,15293
 common/tests/__init__.py,sha256=5Mm89cMYnx-2Fo8qxHPggWFe4j0jZwKcY-JbHPZR8Gc,25744
 common/tests/test_api.py,sha256=Org2-tt3dli6tbhTSVFNNQGFUxRxv3F-Vmt6py3pDPs,311
 common/tests/test_utils.py,sha256=NqAZVx0AbpOnJgLX0lgC40k86j3nbBWQ-agrwIrS7P0,8252
 common/tests/urls.py,sha256=3aNUECjS544gIr3JVa9SzOnGY5WbTZ-EoEL6K9Iylms,494
-common_framework-2023.5.1.dist-info/LICENSE.txt,sha256=-cTHe6o4KABO5UuKTy2y6I7USmI3pJOWW_VR-sD8ti0,1023
-common_framework-2023.5.1.dist-info/METADATA,sha256=axwboLyTsq8iVy_xytLFuLOiGzriD4hbgUJy0qd5J0A,23092
-common_framework-2023.5.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-common_framework-2023.5.1.dist-info/top_level.txt,sha256=-_7pXzjkl9sfbAGjSmzh04NkWEI9H92fmklj4bkMUpo,114
-common_framework-2023.5.1.dist-info/RECORD,,
+common_framework-2023.5.28.dist-info/LICENSE.txt,sha256=-cTHe6o4KABO5UuKTy2y6I7USmI3pJOWW_VR-sD8ti0,1023
+common_framework-2023.5.28.dist-info/METADATA,sha256=sseyfjSFSDpc57dggYwLDBbrm-f-wIgcOeWADOxvuBk,23093
+common_framework-2023.5.28.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+common_framework-2023.5.28.dist-info/top_level.txt,sha256=-_7pXzjkl9sfbAGjSmzh04NkWEI9H92fmklj4bkMUpo,114
+common_framework-2023.5.28.dist-info/RECORD,,
```

